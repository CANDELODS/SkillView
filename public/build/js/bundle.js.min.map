{"version":3,"sources":["app.js","tags.js"],"names":["confirmDelete","event","message","preventDefault","form","target","existingModal","document","querySelector","remove","modalDelete","createElement","classList","add","innerHTML","body","appendChild","btnYes","btnNo","backdrop","closeModal","addEventListener","submit","registerContainer","modal","getElementById","modalContent","closeButton","redirectUrl","window","location","pathname","startsWith","REDIRECT_DELAY","hideModal","showModal","timeoutId","setTimeout","href","clearTimeout","contains","stopPropagation","e","trigger","closest","modalId","dataset","closeTrigger","alertas","querySelectorAll","length","forEach","alerta","toggle","mobileNav","closeBtn","closeMenu","setAttribute","tagsInput","tagsDiv","tagsInputHidden","tags","mostrarTags","textContent","tag","etiqueta","ondblclick","eliminarTag","actualizarInputHidden","filter","value","toString","split","keyCode","trim"],"mappings":"AAuKA,SAAAA,cAAAC,EAAAC,GAEAD,EAAAE,iBAGA,MAAAC,EAAAH,EAAAI,OAGAC,EAAAC,SAAAC,cAAA,iBACAF,GACAA,EAAAG,SAIA,MAAAC,EAAAH,SAAAI,cAAA,OACAD,EAAAE,UAAAC,IAAA,gBACAH,EAAAI,UAAA,uUAKAZ,GAAA,kcAcAK,SAAAQ,KAAAC,YAAAN,GAGA,MAAAO,EAAAP,EAAAF,cAAA,gBACAU,EAAAR,EAAAF,cAAA,eACAW,EAAAT,EAAAF,cAAA,2BAGAY,EAAA,KACAV,EAAAD,UAgBA,OAZAQ,EAAAI,iBAAA,QAAA,KACAD,IACAhB,EAAAkB,WAIAJ,EAAAG,iBAAA,QAAAD,GAGAD,EAAAE,iBAAA,QAAAD,IAGA,EAlOAb,SAAAc,iBAAA,mBAAA,KAIA,MAAAE,EAAAhB,SAAAC,cAAA,wCACAgB,EAAAjB,SAAAkB,eAAA,0BAIA,GAAAF,GAAAC,EAAA,CACA,MAAAE,EAAAF,EAAAhB,cAAA,mBACAmB,EAAAH,EAAAhB,cAAA,sBACA,IAAAoB,EAAA,aACAC,OAAAC,SAAAC,SAAAC,WAAA,0BACAJ,EAAA,mBACAC,OAAAC,SAAAC,SAAAC,WAAA,6BAAAH,OAAAC,SAAAC,SAAAC,WAAA,gCACAJ,EAAA,sBAEA,MAAAK,EAAA,IASAC,EAAA,KAEAV,EAAAZ,UAAAH,OAAA,mBARA,MAEAe,EAAAZ,UAAAC,IAAA,mBAWAsB,GAGA,MAAAC,EAAAC,WAAA,KACAR,OAAAC,SAAAQ,KAAAV,GACAK,GAGAN,GACAA,EAAAN,iBAAA,QAAA,KACAkB,aAAAH,GACAF,IACAL,OAAAC,SAAAQ,KAAAV,IAKAJ,EAAAH,iBAAA,QAAApB,KACAA,EAAAI,SAAAmB,GAAAvB,EAAAI,OAAAO,UAAA4B,SAAA,sBACAD,aAAAH,GACAF,IACAL,OAAAC,SAAAQ,KAAAV,KAKAF,GACAA,EAAAL,iBAAA,QAAApB,IACAA,EAAAwC,oBAaA,MAAA1B,EAAAR,SAAAQ,KAEAR,SAAAc,iBAAA,QAAAqB,IACA,MAAAC,EAAAD,EAAArC,OAAAuC,QAAA,kBACA,IAAAD,EAAA,OAEAD,EAAAvC,iBACA,MAAA0C,EAAAF,EAAAG,QAAAD,QACArB,EAAAjB,SAAAkB,eAAAoB,GACArB,IAEAA,EAAAZ,UAAAC,IAAA,kBACAE,EAAAH,UAAAC,IAAA,gBAIAN,SAAAc,iBAAA,QAAAqB,IACA,MAAAK,EAAAL,EAAArC,OAAAuC,QAAA,sBACA,IAAAG,EAAA,OAEA,MAAAvB,EAAAuB,EAAAH,QAAA,UACApB,IAEAA,EAAAZ,UAAAH,OAAA,kBACAM,EAAAH,UAAAH,OAAA,gBAQA,MAAAuC,EAAAzC,SAAA0C,iBAAA,WAEAD,EAAAE,OAAA,GACAF,EAAAG,QAAAC,IAEAf,WAAA,KACAe,EAAAxC,UAAAC,IAAA,mBAGAwB,WAAA,KACAe,EAAA3C,UACA,MACA,OAMA,MAAA4C,EAAA9C,SAAAC,cAAA,wBACA8C,EAAA/C,SAAAC,cAAA,qBACA+C,EAAAhD,SAAAC,cAAA,2BAEA,IAAA6C,IAAAC,EAAA,OAEA,MAKAE,EAAA,KACAF,EAAA1C,UAAAH,OAAA,yBACA4C,EAAAI,aAAA,gBAAA,UAGAJ,EAAAhC,iBAAA,QAAA,KACAiC,EAAA1C,UAAA4B,SAAA,yBAEAgB,KAZAF,EAAA1C,UAAAC,IAAA,yBACAwC,EAAAI,aAAA,gBAAA,WAiBAF,GACAA,EAAAlC,iBAAA,QAAAmC,GAIAF,EAAAjC,iBAAA,QAAAqB,IACAA,EAAArC,OAAAuC,QAAA,oBACAY,QC7JA,WACA,MAAAE,EAAAnD,SAAAC,cAAA,eACA,GAAAkD,EAAA,CACA,MAAAC,EAAApD,SAAAC,cAAA,SACAoD,EAAArD,SAAAC,cAAA,gBACA,IAAAqD,EAAA,GA0BA,SAAAC,IACAH,EAAAI,YAAA,GAGAF,EAAAV,QAAAa,IACA,MAAAC,EAAA1D,SAAAI,cAAA,MACAsD,EAAArD,UAAAC,IAAA,cACAoD,EAAAF,YAAAC,EAEAC,EAAAC,WAAAC,EACAR,EAAA3C,YAAAiD,KAEAG,IAIA,SAAAD,EAAAzB,GAEAA,EAAArC,OAAAI,SAGAoD,EAAAA,EAAAQ,OAAAL,GAAAA,IAAAtB,EAAArC,OAAA0D,aAEAK,IAIA,SAAAA,IAEAR,EAAAU,MAAAT,EAAAU,WArDA,KAAAX,EAAAU,QACAT,EAAAD,EAAAU,MAAAE,MAAA,KACAV,KAGAJ,EAAArC,iBAAA,YAEA,SAAAqB,GAEA,GAAA,KAAAA,EAAA+B,QAAA,CAIA,GAFA/B,EAAAvC,iBAEA,KAAAuC,EAAArC,OAAAiE,MAAAI,QAAAhC,EAAArC,OAAAiE,MAAA,EACA,OAGAT,EAAA,IAAAA,EAAAnB,EAAArC,OAAAiE,MAAAI,QAEAhB,EAAAY,MAAA,GACAR,SA3BA","file":"bundle.js","sourcesContent":["//Esperamos a que el DOM esté completamente cargado\r\ndocument.addEventListener('DOMContentLoaded', () => {\r\n  //---------------MODAL DE REGISTRO EXITOSO CON REDIRECCIÓN AUTOMÁTICA----------------//\r\n\r\n  //Detectamos si el registro fue exitoso buscando el atributo data-registro-exitoso en el contenedor .register\r\n  const registerContainer = document.querySelector('.register[data-registro-exitoso=\"1\"]');\r\n  const modal = document.getElementById('modal-registro-exitoso');\r\n\r\n  // Solo si estamos en la vista de registro exitoso Y existe el modal,\r\n  // ejecutamos la lógica del modal. PERO no hacemos return, para no cortar el resto del código.\r\n  if (registerContainer && modal) {\r\n    const modalContent = modal.querySelector('.modal__content');\r\n    const closeButton = modal.querySelector('[data-modal-close]');\r\n    let redirectUrl = '/principal';\r\n    if (window.location.pathname.startsWith('/admin/usuarios/editar')) {\r\n      redirectUrl = '/admin/usuarios';\r\n    } else if(window.location.pathname.startsWith('/admin/habilidades/crear') || window.location.pathname.startsWith('/admin/habilidades/editar')){\r\n      redirectUrl = '/admin/habilidades';\r\n    }\r\n    const REDIRECT_DELAY = 5000; // 5 segundos\r\n\r\n    // Mostrar el modal\r\n    const showModal = () => {\r\n      //Agregamos la clase modal--visible para mostrar el modal\r\n      modal.classList.add('modal--visible');\r\n    };\r\n\r\n    // Cerrar el modal\r\n    const hideModal = () => {\r\n      //Quitamos la clase modal--visible para ocultar el modal\r\n      modal.classList.remove('modal--visible');\r\n    };\r\n\r\n    // Mostrar el modal inmediatamente cuando se cargue esta vista\r\n    //Despues de detectar un registro exitoso y verificar que el modal existe entonces...\r\n    showModal();\r\n\r\n    // Programar la redirección automática\r\n    const timeoutId = setTimeout(() => {\r\n      window.location.href = redirectUrl;\r\n    }, REDIRECT_DELAY);\r\n\r\n    // Si el usuario hace clic en el botón \"Ir ahora...\"\r\n    if (closeButton) {\r\n      closeButton.addEventListener('click', () => {\r\n        clearTimeout(timeoutId); // Cancelar la redirección automática\r\n        hideModal(); // Ocultar el modal\r\n        window.location.href = redirectUrl;\r\n      });\r\n    }\r\n\r\n    // Cerrar al hacer clic fuera del contenido (en el backdrop)\r\n    modal.addEventListener('click', (event) => {\r\n      if (event.target === modal || event.target.classList.contains('modal__backdrop')) {\r\n        clearTimeout(timeoutId);\r\n        hideModal();\r\n        window.location.href = redirectUrl;\r\n      }\r\n    });\r\n\r\n    // Evitar que clics dentro del contenido cierren el modal\r\n    if (modalContent) {\r\n      modalContent.addEventListener('click', (event) => {\r\n        event.stopPropagation();\r\n      });\r\n    }\r\n      /*event.stopPropagation() detiene la propagación del evento hacia arriba en el DOM.\r\n      Si el usuario hace clic sobre el contenido del modal (título, texto, botón)\r\n      ese clic no se propaga al listener que está en modal.addEventListener('click', ...).\r\n      Sin esto:\r\n      Hacer clic en el botón podría contarse también como clic en el fondo y disparar el cierre doble.*/\r\n  }\r\n\r\n  //---------------FIN MODAL DE REGISTRO EXITOSO CON REDIRECCIÓN AUTOMÁTICA----------------//\r\n\r\n  //---------------MODAL DE LAS CARDS DE LA SECCIÓN APRENDIZAJE----------------//\r\n  const body = document.body;\r\n  // Abrir modal\r\n  document.addEventListener('click', (e) => {\r\n    const trigger = e.target.closest('.js-open-modal');\r\n    if (!trigger) return;\r\n\r\n    e.preventDefault();\r\n    const modalId = trigger.dataset.modalId;\r\n    const modal   = document.getElementById(modalId);\r\n    if (!modal) return;\r\n\r\n    modal.classList.add('modal--visible');\r\n    body.classList.add('no-scroll');\r\n  });\r\n\r\n  // Cerrar modal (botón X, botón Volver, backdrop)\r\n  document.addEventListener('click', (e) => {\r\n    const closeTrigger = e.target.closest('[data-modal-close]');\r\n    if (!closeTrigger) return;\r\n\r\n    const modal = closeTrigger.closest('.modal');\r\n    if (!modal) return;\r\n\r\n    modal.classList.remove('modal--visible');\r\n    body.classList.remove('no-scroll');\r\n  });\r\n  //---------------FIN MODAL DE LAS CARDS DE LA SECCIÓN APRENDIZAJE----------------//\r\n\r\n\r\n  //---------------OCULTAR ALERTAS DESPUES DE UNOS SEGUNDOS----------------//\r\n  //ESTE CÓDIGO AHORA SIEMPRE SE EJECUTA EN CUALQUIER VISTA\r\n\r\n  const alertas = document.querySelectorAll('.alerta');\r\n\r\n  if (alertas.length > 0) {\r\n    alertas.forEach(alerta => {\r\n      // Esperamos 4 segundos antes de ocultarla\r\n      setTimeout(() => {\r\n        alerta.classList.add('alerta--ocultar');\r\n\r\n        // Después de la animación, la removemos\r\n        setTimeout(() => {\r\n          alerta.remove();\r\n        }, 500); // coincide con la duración del transition en CSS\r\n      }, 4000);\r\n    });\r\n  }\r\n//---------------FIN OCULTAR ALERTAS DESPUES DE UNOS SEGUNDOS----------------//\r\n\r\n//---------------MENU MOBILE----------------//\r\n  const toggle = document.querySelector('.site-header__toggle');\r\n  const mobileNav = document.querySelector('.site-nav--mobile');\r\n  const closeBtn = document.querySelector('.site-nav__mobile-close');\r\n\r\n  if (!toggle || !mobileNav) return;\r\n\r\n  const openMenu = () => {\r\n    mobileNav.classList.add('site-nav--mobile-open');\r\n    toggle.setAttribute('aria-expanded', 'true');\r\n  };\r\n\r\n  const closeMenu = () => {\r\n    mobileNav.classList.remove('site-nav--mobile-open');\r\n    toggle.setAttribute('aria-expanded', 'false');\r\n  };\r\n\r\n  toggle.addEventListener('click', () => {\r\n    const isOpen = mobileNav.classList.contains('site-nav--mobile-open');\r\n    if (isOpen) {\r\n      closeMenu();\r\n    } else {\r\n      openMenu();\r\n    }\r\n  });\r\n\r\n  if (closeBtn) {\r\n    closeBtn.addEventListener('click', closeMenu);\r\n  }\r\n\r\n  // Opcional: cerrar menú al hacer click en un enlace\r\n  mobileNav.addEventListener('click', (e) => {\r\n    if (e.target.closest('.site-nav__link')) {\r\n      closeMenu();\r\n    }\r\n  });\r\n\r\n//---------------FIN MENU MOBILE----------------//\r\n\r\n});\r\n\r\n//Mensaje de confirmación con modal personalizado\r\nfunction confirmDelete(event, message) {\r\n  // 1. Evitamos que el formulario se envíe automáticamente\r\n  event.preventDefault();\r\n\r\n  // 2. Obtenemos el formulario que disparó el evento\r\n  const form = event.target;\r\n\r\n  // 3. Si ya existe un modal abierto, lo eliminamos para no duplicar\r\n  const existingModal = document.querySelector('.modal-delete');\r\n  if (existingModal) {\r\n    existingModal.remove();\r\n  }\r\n\r\n  // 4. Creamos el contenedor del modal\r\n  const modalDelete = document.createElement('div');\r\n  modalDelete.classList.add('modal-delete');\r\n  modalDelete.innerHTML = `\r\n        <div class=\"modal-delete__backdrop\"></div>\r\n        <div class=\"modal-delete__content\" role=\"dialog\" aria-modal=\"true\" aria-labelledby=\"modal-delete-title\">\r\n            <h2 id=\"modal-delete-title\" class=\"modal-delete__title\">Confirmar eliminación</h2>\r\n            <p class=\"modal-delete__text\">\r\n                ${message || \"¿Estás seguro de eliminar este elemento?\"}\r\n            </p>\r\n            <div class=\"modal-delete__actions\">\r\n                <button type=\"button\" id=\"confirm-yes\" class=\"modal-delete__btn--yes\">\r\n                    Sí, eliminar\r\n                </button>\r\n                <button type=\"button\" id=\"confirm-no\" class=\"modal-delete__btn--no\">\r\n                    No, cancelar\r\n                </button>\r\n            </div>\r\n        </div>\r\n    `;\r\n\r\n  // 5. Lo agregamos al DOM\r\n  document.body.appendChild(modalDelete);\r\n\r\n  // 6. Obtenemos los botones\r\n  const btnYes = modalDelete.querySelector('#confirm-yes');\r\n  const btnNo = modalDelete.querySelector('#confirm-no');\r\n  const backdrop = modalDelete.querySelector('.modal-delete__backdrop');\r\n\r\n  // Función para cerrar el modal\r\n  const closeModal = () => {\r\n    modalDelete.remove();\r\n  };\r\n\r\n  // 7. Si el usuario confirma -> cerramos modal y enviamos el formulario\r\n  btnYes.addEventListener('click', () => {\r\n    closeModal();\r\n    form.submit(); // Aquí sí se envía al servidor\r\n  });\r\n\r\n  // 8. Si el usuario cancela -> solo cerramos modal\r\n  btnNo.addEventListener('click', closeModal);\r\n\r\n  // 9. Cerrar si hace clic en el fondo oscuro\r\n  backdrop.addEventListener('click', closeModal);\r\n\r\n  // 10. Devolvemos false por si acaso, para que el onsubmit no continúe\r\n  return false;\r\n}\r\n","//Función IFEE, se llama inmediatamente sin tener nombre, además las variables solo existen en este archivo\r\n(function(){\r\n    const tagsInput = document.querySelector('#tags_input');\r\n    if(tagsInput){\r\n        const tagsDiv = document.querySelector('#tags');\r\n        const tagsInputHidden = document.querySelector('[name=\"tag\"]');\r\n        let tags = [];\r\n        //Recuperar del input oculto\r\n        if(tagsInputHidden.value !== ''){\r\n            tags = tagsInputHidden.value.split(',');\r\n            mostrarTags();\r\n        }\r\n        //Escuchar los cambios en el input\r\n        tagsInput.addEventListener('keypress', guardarTag)\r\n\r\n        function guardarTag(e){\r\n            //El keyCode Nos Permite Saber El Código De La Tecla Presionada, En Este Caso 44 = coma(,)\r\n            if (e.keyCode === 44) {\r\n                //Para Que No Se Ponga La Coma En Automático Cuando Se Borra El Input Quitamos La Acción Por Defecto Del Form\r\n                e.preventDefault();\r\n                //Prevenir Espacios En Blanco\r\n                if (e.target.value.trim() === '' || e.target.value < 1) {\r\n                    return;\r\n                }\r\n                //Tomamos Una Copia Del Arreglo Tags, Y Reemplazamos El Contenido Con Lo Que Hay En El Input\r\n                tags = [...tags, e.target.value.trim()];\r\n                //Vaciamos El Input Cada Vez Que Se Pone Una Coma(,)\r\n                tagsInput.value = '';\r\n                mostrarTags();\r\n            }\r\n        }\r\n\r\n        function mostrarTags(){\r\n            tagsDiv.textContent = '';\r\n            //Iteramos El Arreglo Que Tiene Los Tags, Creo La Variable Momentanea Tag Y Hago Escripting Para\r\n            //Mostrar Los Tags En El Lugar Deseado\r\n            tags.forEach(tag =>{\r\n                const etiqueta = document.createElement('LI');\r\n                etiqueta.classList.add('login__tag');\r\n                etiqueta.textContent = tag;\r\n                //Asignamos un evento y una función a cada Tags conforme es creado\r\n                etiqueta.ondblclick = eliminarTag; //No Ponemos eliminarTag() Por Que Llamaría La Función Inmediatamente\r\n                tagsDiv.appendChild(etiqueta);\r\n            })\r\n            actualizarInputHidden();\r\n        }\r\n\r\n        //Como Su Nombre lo Dice, Nos Permitirá Eliminar Los Tags, Se Pasa El Evento (e) Para Identificar El Tag\r\n        function eliminarTag(e){\r\n            //Removemos el Tag del DOM\r\n            e.target.remove();\r\n            //Quitamos El Tag Del Arreglo\r\n            //Filtra o trae todos los tags que no sean al que yo le de click\r\n            tags = tags.filter(tag => tag !== e.target.textContent);\r\n            //Refrescamos Y Sincronizamos El Input Oculto Con Los Nuevos Valores\r\n            actualizarInputHidden();\r\n        }\r\n\r\n        //Nos servirá para actualizar el input hidden cuando agregamos y quitamos etiquetas\r\n        function actualizarInputHidden(){\r\n            //Convertimos El Arreglo En Un String\r\n            tagsInputHidden.value = tags.toString();\r\n        }\r\n    }\r\n})() //Este Parentecis Manda A Llamar A La Función"]}